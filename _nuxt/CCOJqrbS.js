import{_ as T,u as j,C,r as b,o as E,D as K,t as d,x as l,z as a,A as n,E as s,F as k,y as r,G as L,g as Y,v as i,H as P,I as h,B as N,J as U,K as A,L as G,M as H,N as x,O as D}from"./Q2KG5fdx.js";import{u as J}from"./RQcqIEXU.js";import Q from"./CRhXsxIJ.js";import W from"./BmNxosb9.js";import X from"./Dl0VzYq3.js";import Z from"./O5H2VLHY.js";import ee from"./CWLWmzWo.js";import te from"./CclmZzsa.js";import le from"./D63B6CU9.js";import se from"./B5xLDGqS.js";import"./VXbGxlIs.js";const oe={class:"tabs-container"},ne={class:"container"},re={class:"search-container search-bar"},ie={key:1,class:"container"},ae={style:{marginBottom:0}},ue={style:{margin:"0"}},ce={key:0,style:{"text-align":"center"}},de={key:0},me={key:1},pe={style:{"text-align":"center"}},ve={key:0},he={key:1},fe={class:"p-d-flex p-ai-center"},ge={style:{margin:"0"}},_e={style:{whiteSpace:"break-spaces",marginTop:"0.5rem"},class:"p-card-subtitle"},be={key:0,style:{"margin-top":"8rem"}},ye=["href"],ke={__name:"home",setup(xe){const B=K(),I=j(),{initTermData:z}=J(),F=C("updateMenubar"),$=b(!1),y=b(""),w=()=>{y.value&&($.value=!0,I.push(`/?s=${y.value}`))},O=b({quick:{label:"快速搜尋",value:"quick",route:"/"},dept:{label:"系所",value:"dept",route:"/?m=dept"},advanced:{label:"進階搜尋",value:"advanced",route:"/?m=advanced"},general:{label:"通識",value:"general",route:"/?m=general"},physical:{label:"體育",activeLabel:"普通體育",value:"physical",route:"/?m=physical"},defense:{label:"國防",activeLabel:"全民國防教育",value:"defense",route:"/?m=defense"},interschool:{label:"校際",activeLabel:"臺大系統校際課程",value:"interschool",route:"/?m=interschool"},program:{label:"學分學程",value:"program",route:"/?m=program"},english:{label:"英文三",value:"english",route:"/?m=english"},emi:{label:"英文授課",value:"emi",route:"/?m=emi"},"":{label:"",value:"quick",route:"/"}}),m=C("courseSelectionSchedule",()=>{}),v=b(1),q=b([{breakpoint:"1280px",numVisible:3,numScroll:1},{breakpoint:"745px",numVisible:1,numScroll:1}]);function R(){const o=new Date,t=o.getFullYear()-1911,p=o.getMonth()+1,f=o.getDate();for(const[g,c]of m.value.schedule.entries())if(c.date&&c.date.date){const[u,e,_]=c.date.date.split("/").map(Number);if(t>u||t===u&&p>e||t===u&&p===e&&f>_)continue;return g}else if(c.end&&c.end.date){const[u,e,_]=c.end.date.split("/").map(Number);if(t>u||t===u&&p>e||t===u&&p===e&&f>_)continue;return g}}function S(o,t,p){return Math.min(Math.max(o,t),p)}function V(o){v.value=S(o,0,m.value.schedule.length-3)}return E(async()=>{await fetch("/data/schedule.json").then(o=>o.json()).then(o=>{m.value=o;const t=R();t!==void 0&&(v.value=S(t,1,m.value.schedule.length-1)-1)}).catch(o=>{console.error("Error fetching course selection schedule:",o)}),await z(B),F.value()}),(o,t)=>{var f,g,c,u;const p=Y("RouterLink");return i(),d(L,null,[l("div",oe,[a(s(X),{scrollable:""},{default:n(()=>[a(s(Q),null,{default:n(()=>[(i(!0),d(L,null,P(Object.values(O.value),e=>(i(),k(s(W),{key:e.value,value:e.value,onClick:_=>e.command?e.command():null},{default:n(()=>[e.route?(i(),k(p,{key:0,to:e.route,style:{textDecoration:"none",color:"inherit"}},{default:n(()=>[N(r(e.label),1)]),_:2},1032,["to"])):h("",!0)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})]),l("div",ne,[l("div",re,[a(s(Z),{variant:"in",class:"search-input single-search-input"},{default:n(()=>[a(s(U),null,{default:n(()=>[a(s(A),null,{default:n(()=>t[5]||(t[5]=[l("i",{class:"pi pi-search"},null,-1)])),_:1}),a(s(G),{id:"globalFilter",modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),autocapitalize:!1,size:"large",style:{width:"100%"},onBlur:t[1]||(t[1]=e=>w()),onKeyup:t[2]||(t[2]=H(e=>w(),["enter"]))},null,8,["modelValue"])]),_:1}),t[6]||(t[6]=l("label",{class:"global-filter-label",for:"globalFilter"},"課程名稱/教師/開課序號",-1))]),_:1})]),$.value?(i(),k(s(ee),{key:0,style:{"margin-top":"auto","margin-bottom":"auto"}})):(i(),d("div",ie,[l("h3",ae,r((f=s(m))==null?void 0:f.year)+" 學年度 第 "+r((g=s(m))==null?void 0:g.term)+" 學期 ",1),t[8]||(t[8]=l("h1",{class:"center"},"選課時程",-1)),a(s(se),{value:(c=s(m))==null?void 0:c.schedule,page:v.value,numVisible:3,numScroll:1,showNavigators:!1,showIndicators:!1,responsiveOptions:q.value},{item:n(({data:e,_})=>[a(s(te),{class:"p-mb-3",style:x(e!=null&&e.info?{}:{boxShadow:"none"})},{title:n(()=>[l("h3",ue,r(e==null?void 0:e.info),1)]),subtitle:n(()=>[e!=null&&e.date?(i(),d("div",ce,[e.date.time?(i(),d("span",de,r(e.date.time),1)):h("",!0),l("span",{class:"card-title-date",style:x({color:e.color})},r(e.date.date),5)])):h("",!0),e.start?(i(),d("div",me,[l("div",pe,[e.start.time?(i(),d("span",ve,r(e.start.time),1)):h("",!0),l("span",{class:"card-title-date",style:x({color:e.color})},r(e.start.date)+"-"+r(e.end.date),5),e.end.time?(i(),d("span",he,r(e.end.time),1)):h("",!0)])])):h("",!0)]),content:n(()=>[a(s(le),{value:e==null?void 0:e.steps,align:"left",class:"p-mt-3"},{content:n(({item:M})=>[l("div",fe,[l("div",null,[l("h4",ge,r(M.title),1),l("div",_e,r(M.description),1)])])]),_:2},1032,["value"])]),footer:n(()=>[e!=null&&e.moreInfo?(i(),d("div",be,[l("a",{href:e.moreInfoUrl,target:"_blank",style:{color:"inherit","text-decoration":"none",cursor:"pointer"}},[t[7]||(t[7]=l("i",{class:"pi pi-external-link",style:{"margin-right":"1rem"}},null,-1)),N(" "+r(e.moreInfo),1)],8,ye)])):h("",!0)]),_:2},1032,["style"])]),_:1},8,["value","page","responsiveOptions"]),l("div",null,[a(s(D),{icon:"pi pi-angle-left",variant:"text",rounded:"",size:"large",onClick:t[3]||(t[3]=e=>V(v.value-1)),disabled:v.value<=0,style:{"margin-right":"0.5rem"}},null,8,["disabled"]),a(s(D),{icon:"pi pi-angle-right",variant:"text",rounded:"",size:"large",onClick:t[4]||(t[4]=e=>V(v.value+1)),disabled:v.value>=((u=s(m))==null?void 0:u.schedule.length)-3},null,8,["disabled"])])]))])],64)}}},ze=T(ke,[["__scopeId","data-v-b84bade8"]]);export{ze as default};
