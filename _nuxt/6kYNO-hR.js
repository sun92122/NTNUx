import{_ as B,D as b,r as N,o as T,E as z,F as E,v as p,A as f,G as L,H as l,y as i,z as a,B as v,I as O,x as u,J as _,C as U,K as $,L as w}from"./DiLWiPl0.js";import{u as Y}from"./CTrtmnpk.js";import{_ as j}from"./D6vIZvhe.js";import F from"./CWO-2225.js";import P from"./V-RcxawA.js";import A from"./Bu9Jl-A8.js";import G from"./BaAdHkTj.js";import"./JoPJIJLl.js";import"./BSqxwEZU.js";import"./BcK_b1T2.js";import"./DStiuprp.js";import"./BXLsDyBW.js";import"./AW1lQm3q.js";import"./BnYmzFhh.js";import"./IZJForRl.js";import"./DLl7NKuB.js";const H={class:"container"},J={key:1,class:"container"},K={style:{marginBottom:0}},R={class:"card-container"},q={style:{margin:"0"}},Q={key:0,style:{"text-align":"center"}},W={key:0},X={key:1},Z={style:{"text-align":"center"}},ee={key:0},te={key:1},se={class:"p-d-flex p-ai-center"},oe={style:{margin:"0"}},ne={style:{whiteSpace:"break-spaces",marginTop:"0.5rem"},class:"p-card-subtitle"},ie={key:0,style:{"margin-top":"8rem"}},re=["href"],le={__name:"home",setup(ae){const M=z(),{initTermData:C}=Y(),D=b("updateMenubar"),I=b("routerLoading",()=>!1),o=b("courseSelectionSchedule",()=>{}),d=N(1),S=N([{breakpoint:"100000px",numVisible:3,numScroll:1},{breakpoint:"745px",numVisible:1,numScroll:1}]);function V(){const s=new Date,t=s.getFullYear()-1911,r=s.getMonth()+1,n=s.getDate();for(const[g,c]of o.value.schedule.entries())if(c.date&&c.date.date){const[e,m,h]=c.date.date.split("/").map(Number);if(t>e||t===e&&r>m||t===e&&r===m&&n>h)continue;return g}else if(c.end&&c.end.date){const[e,m,h]=c.end.date.split("/").map(Number);if(t>e||t===e&&r>m||t===e&&r===m&&n>h)continue;return g}}function k(s,t,r){return Math.min(Math.max(s,t),r)}function x(s){d.value=k(s,0,o.value.schedule.length-3)}function y(){var t,r;const s=V();if(s!==void 0){d.value=k(s,1,o.value.schedule.length-1)-1;const n=o.value.schedule[s];O({title:"選課時程",description:`查看選課時程並快速搜尋課程。${n.info?`${n.info} ${((t=n==null?void 0:n.date)==null?void 0:t.date)||((r=n==null?void 0:n.start)==null?void 0:r.date)||""}`:""}`,keywords:"師大課程查詢, 師大課程, 師大選課, NTNU Course Search"})}}return T(async()=>{var s;(s=o==null?void 0:o.value)!=null&&s.schedule?y():await fetch("/data/schedule.json").then(t=>t.json()).then(t=>{o.value=t,y()}).catch(t=>{console.error("Error fetching course selection schedule:",t)}),await C(M),D.value()}),E(()=>{var s,t;return(t=(s=o==null?void 0:o.value)==null?void 0:s.schedule)==null?void 0:t.length},s=>{s>0&&y()}),(s,t)=>{var r,n,g,c;return u(),p("div",H,[f(l(j)),l(I)?(u(),L(l(F),{key:0,style:{"margin-top":"30vh","margin-bottom":"20vh"}})):(u(),p("div",J,[i("h3",K,a((r=l(o))==null?void 0:r.year)+" 學年度 第 "+a((n=l(o))==null?void 0:n.term)+" 學期 ",1),t[4]||(t[4]=i("h1",{class:"center"},"選課時程",-1)),f(l(G),{value:(g=l(o))==null?void 0:g.schedule,page:d.value,numVisible:1,numScroll:1,showNavigators:!1,showIndicators:!1,responsiveOptions:S.value,"onUpdate:page":t[0]||(t[0]=e=>d.value=e)},{item:v(({data:e,_:m})=>[i("div",R,[f(l(P),{class:"schedule-card"},{title:v(()=>[i("h3",q,a(e==null?void 0:e.info),1)]),subtitle:v(()=>[e!=null&&e.date?(u(),p("div",Q,[e.date.time?(u(),p("span",W,a(e.date.time),1)):_("",!0),i("span",{class:"card-title-date",style:$({color:e.color})},a(e.date.date),5)])):_("",!0),e.start?(u(),p("div",X,[i("div",Z,[e.start.time?(u(),p("span",ee,a(e.start.time),1)):_("",!0),i("span",{class:"card-title-date",style:$({color:e.color})},a(e.start.date)+"-"+a(e.end.date),5),e.end.time?(u(),p("span",te,a(e.end.time),1)):_("",!0)])])):_("",!0)]),content:v(()=>[f(l(A),{value:e==null?void 0:e.steps,align:"left",class:"p-mt-3"},{content:v(({item:h})=>[i("div",se,[i("div",null,[i("h4",oe,a(h.title),1),i("div",ne,a(h.description),1)])])]),_:2},1032,["value"])]),footer:v(()=>[e!=null&&e.moreInfo?(u(),p("div",ie,[i("a",{href:e.moreInfoUrl,target:"_blank",style:{color:"inherit","text-decoration":"none",cursor:"pointer"}},[t[3]||(t[3]=i("i",{class:"pi pi-external-link",style:{"margin-right":"1rem"}},null,-1)),U(" "+a(e.moreInfo),1)],8,re)])):_("",!0)]),_:2},1024)])]),_:1},8,["value","page","responsiveOptions"]),i("div",null,[f(l(w),{icon:"pi pi-angle-left",variant:"text",rounded:"",size:"large",onClick:t[1]||(t[1]=e=>x(d.value-1)),disabled:d.value<=0,style:{"margin-right":"0.5rem"}},null,8,["disabled"]),f(l(w),{icon:"pi pi-angle-right",variant:"text",rounded:"",size:"large",onClick:t[2]||(t[2]=e=>x(d.value+1)),disabled:d.value>=((c=l(o))==null?void 0:c.schedule.length)-3},null,8,["disabled"])])]))])}}},we=B(le,[["__scopeId","data-v-05e3ba36"]]);export{we as default};
