import{_ as O,C as w,r as y,o as T,D as j,t as d,x as o,z as h,A as i,E as l,y as s,F as C,g as q,v as a,G as E,H as M,I as v,B as $,J as b,K as D}from"./C3oQwdnR.js";import{u as F}from"./BT_WmsSP.js";import R from"./DV7_7_OC.js";import Y from"./kgehzn6L.js";import P from"./D3rGO3fE.js";import A from"./CsBZLywa.js";import G from"./Bk5a0ncT.js";import H from"./Bb8yFkw2.js";import"./qKSFnqci.js";const J={class:"tabs-container"},K={class:"container"},U={style:{marginBottom:0}},Q={style:{margin:"0"}},W={key:0,style:{"text-align":"center"}},X={key:0},Z={key:1},ee={style:{"text-align":"center"}},te={key:0},oe={key:1},ne={class:"p-d-flex p-ai-center"},se={style:{margin:"0"}},le={style:{whiteSpace:"break-spaces",marginTop:"0.5rem"},class:"p-card-subtitle"},re={key:0,style:{"margin-top":"8rem"}},ie=["href"],ae={__name:"home",setup(ce){const N=j(),{initTermData:I}=F(),L=w("updateMenubar"),V=y({quick:{label:"快速搜尋",value:"quick",route:"/"},dept:{label:"系所",value:"dept",route:"/?m=dept"},advanced:{label:"進階搜尋",value:"advanced",route:"/?m=advanced"},general:{label:"通識",value:"general",route:"/?m=general"},physical:{label:"體育",activeLabel:"普通體育",value:"physical",route:"/?m=physical"},defense:{label:"國防",activeLabel:"全民國防教育",value:"defense",route:"/?m=defense"},interschool:{label:"校際",activeLabel:"臺大系統校際課程",value:"interschool",route:"/?m=interschool"},program:{label:"學分學程",value:"program",route:"/?m=program"},english:{label:"英文三",value:"english",route:"/?m=english"},emi:{label:"英文授課",value:"emi",route:"/?m=emi"},"":{label:"",value:"quick",route:"/"}}),u=w("courseSelectionSchedule",()=>{}),p=y(1),B=y([{breakpoint:"1280px",numVisible:3,numScroll:1},{breakpoint:"745px",numVisible:1,numScroll:1}]);function z(){const n=new Date,t=n.getFullYear()-1911,m=n.getMonth()+1,f=n.getDate();for(const[_,c]of u.value.schedule.entries())if(c.date&&c.date.date){const[r,e,g]=c.date.date.split("/").map(Number);if(t>r||t===r&&m>e||t===r&&m===e&&f>g)continue;return _}else if(c.end&&c.end.date){const[r,e,g]=c.end.date.split("/").map(Number);if(t>r||t===r&&m>e||t===r&&m===e&&f>g)continue;return _}}function k(n,t,m){return Math.min(Math.max(n,t),m)}function x(n){p.value=k(n,0,u.value.schedule.length-3)}return T(async()=>{await fetch("/data/schedule.json").then(n=>n.json()).then(n=>{u.value=n;const t=z();t!==void 0&&(p.value=k(t,1,u.value.schedule.length-1)-1)}).catch(n=>{console.error("Error fetching course selection schedule:",n)}),await I(N),L.value()}),(n,t)=>{var f,_,c,r;const m=q("RouterLink");return a(),d(C,null,[o("div",J,[h(l(P),{scrollable:""},{default:i(()=>[h(l(R),null,{default:i(()=>[(a(!0),d(C,null,E(Object.values(V.value),e=>(a(),M(l(Y),{key:e.value,value:e.value,onClick:g=>e.command?e.command():null},{default:i(()=>[e.route?(a(),M(m,{key:0,to:e.route,style:{textDecoration:"none",color:"inherit"}},{default:i(()=>[$(s(e.label),1)]),_:2},1032,["to"])):v("",!0)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})]),o("div",K,[o("h3",U,s((f=l(u))==null?void 0:f.year)+" 學年度 第 "+s((_=l(u))==null?void 0:_.term)+" 學期 ",1),t[3]||(t[3]=o("h1",{class:"center"},"選課時程",-1)),h(l(H),{value:(c=l(u))==null?void 0:c.schedule,page:p.value,numVisible:3,numScroll:1,showNavigators:!1,showIndicators:!1,responsiveOptions:B.value},{item:i(({data:e,_:g})=>[h(l(A),{class:"p-mb-3",style:b(e!=null&&e.info?{}:{boxShadow:"none"})},{title:i(()=>[o("h3",Q,s(e==null?void 0:e.info),1)]),subtitle:i(()=>[e!=null&&e.date?(a(),d("div",W,[e.date.time?(a(),d("span",X,s(e.date.time),1)):v("",!0),o("span",{class:"card-title-date",style:b({color:e.color})},s(e.date.date),5)])):v("",!0),e.start?(a(),d("div",Z,[o("div",ee,[e.start.time?(a(),d("span",te,s(e.start.time),1)):v("",!0),o("span",{class:"card-title-date",style:b({color:e.color})},s(e.start.date)+"-"+s(e.end.date),5),e.end.time?(a(),d("span",oe,s(e.end.time),1)):v("",!0)])])):v("",!0)]),content:i(()=>[h(l(G),{value:e==null?void 0:e.steps,align:"left",class:"p-mt-3"},{content:i(({item:S})=>[o("div",ne,[o("div",null,[o("h4",se,s(S.title),1),o("div",le,s(S.description),1)])])]),_:2},1032,["value"])]),footer:i(()=>[e!=null&&e.moreInfo?(a(),d("div",re,[o("a",{href:e.moreInfoUrl,target:"_blank",style:{color:"inherit","text-decoration":"none",cursor:"pointer"}},[t[2]||(t[2]=o("i",{class:"pi pi-external-link",style:{"margin-right":"1rem"}},null,-1)),$(" "+s(e.moreInfo),1)],8,ie)])):v("",!0)]),_:2},1032,["style"])]),_:1},8,["value","page","responsiveOptions"]),o("div",null,[h(l(D),{icon:"pi pi-angle-left",variant:"text",rounded:"",size:"large",onClick:t[0]||(t[0]=e=>x(p.value-1)),disabled:p.value<=0,style:{"margin-right":"0.5rem"}},null,8,["disabled"]),h(l(D),{icon:"pi pi-angle-right",variant:"text",rounded:"",size:"large",onClick:t[1]||(t[1]=e=>x(p.value+1)),disabled:p.value>=((r=l(u))==null?void 0:r.schedule.length)-3},null,8,["disabled"])])])],64)}}},ye=O(ae,[["__scopeId","data-v-32614309"]]);export{ye as default};
